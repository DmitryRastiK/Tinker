# Двуногий робот Tinker

Этот проект сделан на основе https://github.com/Yuexuan9/Tinker.git  

## Характеристики системы

| Характеристика       | Значение                                |
|----------------------|----------------------------------------|
| Процессор            | AMD Ryzen 5 5500U                      |
| Графика              | Radeon Graphics                        |
| Память               | 16 ГБ DDR4                             |
| ОС                   | Ubuntu 22.04.5 LTS                     |
| Версия ROS           | ROS 2 Humble                           |
| Версия Gazebo        | Gazebo 11.10.2                         |
| Разрядность          | 64-bit                                 |


## Пакет `tinker` :

Содержит urdf описание для запуска модели робота (пока что только часть с ногами) в RVIZ2.

### Запуск модельки
```bash
ros2 launch tinker description.launch.py
```

## Пакет `tinker_gui` :

Графический пользовательский интерфейс для управления роботом Tinker в ROS2. Пакет предоставляет удобный способ управления 10 моторами робота через интуитивно понятный интерфейс.

`gui_slider_node.py` - Главный GUI узел с интерфейсом управления
`commands_to_states_bridge.py` - Мост для пересылки команд в состояния
`states_to_joint_states.py` - Мост для анимации модели робота
`test_data_publisher.py` - Тестовый узел для генерации демо-данных

С помощью config файла `gui_node.yaml` можно задать количество моторов и их ограничения на перемещения (можно взять из urdf робота).

### Запуск всей системы GUI
```bash
ros2 launch tinker_gui gui_system.launch.py
```

### Parameters (Параметры):
- `id` - идентификатор мотора (неизменяемый)
- `enable` - включение/выключение мотора (галочка)
- `reset_zero` - задание нулевого положения
- `reset_error` - сброс ошибок (галочка) / 
- `acc_calibrate` - калибровка акселерометра (галочка)
- `gyro_calibrate` - калибровка гироскопа (галочка)
- `mag_calibrate` - калибровка магнитометра (галочка)
- `beep_state` - выбор звукового сигнала
- `kp` - пропорциональный коэффициент PID
- `kd` - дифференциальный коэффициент PID

На каждый мотор можно отправить:

- `target_pos` - позиция (задается `kp` и `kd`)
- `target_vel` - скорость (задается только `kd`, `kp` = 0)
- `target_trq` - момент (`kp` = 0, `kd` = 0)

Одновременно можно задать только одно из значений.

При выключении мотора значения `kp` и `kd` сбрасываются. 

![Tinker GUI в работе](/img/tinker_gui.png)


